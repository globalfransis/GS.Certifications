/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/vuedraggable@2.24.3/src/vuedraggable.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Sortable from"sortablejs";import{insertNodeAt,camelize,console,removeNode}from"./util/helper";function buildAttribute(e,t,n){return void 0===n||((e=e||{})[t]=n),e}function computeVmIndex(e,t){return e.map((e=>e.elm)).indexOf(t)}function computeIndexes(e,t,n,o){if(!e)return[];const i=e.map((e=>e.elm)),s=t.length-o,r=[...t].map(((e,t)=>t>=s?i.length:i.indexOf(e)));return n?r.filter((e=>-1!==e)):r}function emit(e,t){this.$nextTick((()=>this.$emit(e.toLowerCase(),t)))}function delegateAndEmit(e){return t=>{null!==this.realList&&this["onDrag"+e](t),emit.call(this,e,t)}}function isTransitionName(e){return["transition-group","TransitionGroup"].includes(e)}function isTransition(e){if(!e||1!==e.length)return!1;const[{componentOptions:t}]=e;return!!t&&isTransitionName(t.tag)}function getSlot(e,t,n){return e[n]||(t[n]?t[n]():void 0)}function computeChildrenAndOffsets(e,t,n){let o=0,i=0;const s=getSlot(t,n,"header");s&&(o=s.length,e=e?[...s,...e]:[...s]);const r=getSlot(t,n,"footer");return r&&(i=r.length,e=e?[...e,...r]:[...r]),{children:e,headerOffset:o,footerOffset:i}}function getComponentAttributes(e,t){let n=null;const o=(e,t)=>{n=buildAttribute(n,e,t)};if(o("attrs",Object.keys(e).filter((e=>"id"===e||e.startsWith("data-"))).reduce(((t,n)=>(t[n]=e[n],t)),{})),!t)return n;const{on:i,props:s,attrs:r}=t;return o("on",i),o("props",s),Object.assign(n.attrs,r),n}const eventsListened=["Start","Add","Remove","Update","End"],eventsToEmit=["Choose","Unchoose","Sort","Filter","Clone"],readonlyProperties=["Move",...eventsListened,...eventsToEmit].map((e=>"on"+e));var draggingElement=null;const props={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:e=>e},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},draggableComponent={name:"draggable",inheritAttrs:!1,props:props,data:()=>({transitionMode:!1,noneFunctionalComponentMode:!1}),render(e){const t=this.$slots.default;this.transitionMode=isTransition(t);const{children:n,headerOffset:o,footerOffset:i}=computeChildrenAndOffsets(t,this.$slots,this.$scopedSlots);this.headerOffset=o,this.footerOffset=i;const s=getComponentAttributes(this.$attrs,this.componentData);return e(this.getTag(),s,n)},created(){null!==this.list&&null!==this.value&&console.error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&console.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&console.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted(){if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: "+this.getTag());const e={};eventsListened.forEach((t=>{e["on"+t]=delegateAndEmit.call(this,t)})),eventsToEmit.forEach((t=>{e["on"+t]=emit.bind(this,t)}));const t=Object.keys(this.$attrs).reduce(((e,t)=>(e[camelize(t)]=this.$attrs[t],e)),{}),n=Object.assign({},this.options,t,e,{onMove:(e,t)=>this.onDragMove(e,t)});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new Sortable(this.rootContainer,n),this.computeIndexes()},beforeDestroy(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer(){return this.transitionMode?this.$el.children[0]:this.$el},realList(){return this.list?this.list:this.value}},watch:{options:{handler(e){this.updateOptions(e)},deep:!0},$attrs:{handler(e){this.updateOptions(e)},deep:!0},realList(){this.computeIndexes()}},methods:{getIsFunctional(){const{fnOptions:e}=this._vnode;return e&&e.functional},getTag(){return this.tag||this.element},updateOptions(e){for(var t in e){const n=camelize(t);-1===readonlyProperties.indexOf(n)&&this._sortable.option(n,e[t])}},getChildrenNodes(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;const e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes(){this.$nextTick((()=>{this.visibleIndexes=computeIndexes(this.getChildrenNodes(),this.rootContainer.children,this.transitionMode,this.footerOffset)}))},getUnderlyingVm(e){const t=computeVmIndex(this.getChildrenNodes()||[],e);if(-1===t)return null;return{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:({__vue__:e})=>e&&e.$options&&isTransitionName(e.$options._componentTag)?e.$parent:!("realList"in e)&&1===e.$children.length&&"realList"in e.$children[0]?e.$children[0]:e,emitChanges(e){this.$nextTick((()=>{this.$emit("change",e)}))},alterList(e){if(this.list)return void e(this.list);const t=[...this.value];e(t),this.$emit("input",t)},spliceList(){this.alterList((e=>e.splice(...arguments)))},updatePosition(e,t){this.alterList((n=>n.splice(t,0,n.splice(e,1)[0])))},getRelatedContextFromMoveEvent({to:e,related:t}){const n=this.getUnderlyingPotencialDraggableComponent(e);if(!n)return{component:n};const o=n.realList,i={list:o,component:n};if(e!==t&&o&&n.getUnderlyingVm){const e=n.getUnderlyingVm(t);if(e)return Object.assign(e,i)}return i},getVmIndex(e){const t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent(){return this.$slots.default[0].componentInstance},resetTransitionData(e){if(!this.noTransitionOnDrag||!this.transitionMode)return;this.getChildrenNodes()[e].data=null;const t=this.getComponent();t.children=[],t.kept=void 0},onDragStart(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),draggingElement=e.item},onDragAdd(e){const t=e.item._underlying_vm_;if(void 0===t)return;removeNode(e.item);const n=this.getVmIndex(e.newIndex);this.spliceList(n,0,t),this.computeIndexes();const o={element:t,newIndex:n};this.emitChanges({added:o})},onDragRemove(e){if(insertNodeAt(this.rootContainer,e.item,e.oldIndex),"clone"===e.pullMode)return void removeNode(e.clone);const t=this.context.index;this.spliceList(t,1);const n={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:n})},onDragUpdate(e){removeNode(e.item),insertNodeAt(e.from,e.item,e.oldIndex);const t=this.context.index,n=this.getVmIndex(e.newIndex);this.updatePosition(t,n);const o={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:o})},updateProperty(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex(e,t){if(!e.element)return 0;const n=[...t.to.children].filter((e=>"none"!==e.style.display)),o=n.indexOf(t.related),i=e.component.getVmIndex(o);return-1!==n.indexOf(draggingElement)||!t.willInsertAfter?i:i+1},onDragMove(e,t){const n=this.move;if(!n||!this.realList)return!0;const o=this.getRelatedContextFromMoveEvent(e),i=this.context,s=this.computeFutureIndex(o,e);Object.assign(i,{futureIndex:s});return n(Object.assign({},e,{relatedContext:o,draggedContext:i}),t)},onDragEnd(){this.computeIndexes(),draggingElement=null}}};"undefined"!=typeof window&&"Vue"in window&&window.Vue.component("draggable",draggableComponent);export default draggableComponent;
//# sourceMappingURL=/sm/4483a5a8d71bbc9f781db3272e37b08da1b21f2859da21e64faa27191262f35b.map